tinymce.PluginManager.add("wprainbow",function(a){function d(b){a.dom.setAttrib(a.dom.getParent(a.selection.getNode(),"PRE"),"data-language",b)}function e(){var b=a.dom.getParent(a.selection.getNode(),"PRE"),c=a.dom.getAttrib(b,"data-language"),b=a.dom.getAttrib(b,"data-line")||0;a.windowManager.open({title:"Anchor",body:[{type:"listbox",name:"language",size:40,label:wprainbow.l10n.code_language,values:wprainbow.languages,value:c},{type:"checkbox",name:"enable_line_numbering",label:wprainbow.l10n.enable_line_numbering,
value:"1",checked:"-1"!=b},{type:"textbox",name:"starting_line",label:wprainbow.l10n.starting_line,value:b}],onsubmit:function(b){d(b.data.language);console.log();var c=-1;b.data.enable_line_numbering&&(c=Math.abs(b.data.starting_line),isNaN(c)&&(c=1));b=c;a.dom.setAttrib(a.dom.getParent(a.selection.getNode(),"PRE"),"data-line",b)}})}a.addButton("wprainbow",{type:"listbox",text:wprainbow.l10n.code_language,tooltip:wprainbow.l10n.code_language,menu_button:!0,classes:"widget btn fixed-width",onselect:function(a){d(this.value())},
values:wprainbow.languages,onPostRender:function(){codeSelect=this;a.on("nodechange",function(b){b=codeSelect;var c=a.dom.getParent(a.selection.getNode(),"PRE");b.disabled(!c);b.value(a.dom.getAttrib(c,"data-language"))});for(var b in wprainbow.languages){var c=wprainbow.languages[b].value;c&&a.contentStyles.push('pre[data-language="'+c+'"]:before { content:"'+wprainbow.languages[b].text+'" }')}}});wprainbow.enable_line_numbering&&a.addButton("wprainbow_codecontrol",{tooltip:wprainbow.l10n.code_properties,
onclick:e,onPostRender:function(){var b=this;a.on("nodechange",function(c){c=a.dom.getParent(a.selection.getNode(),"PRE");b.disabled(!c);b.value(a.dom.getAttrib(c,"data-language"))})}})});

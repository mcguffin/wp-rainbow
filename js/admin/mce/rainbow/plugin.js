tinymce.PluginManager.add("wprainbow",function(e){function n(){var n=e.dom.getParent(e.selection.getNode(),"PRE");i.disabled(!n),i.value(e.dom.getAttrib(n,"data-language")),l&&l.disabled(!n)}function a(n){console.log(n),e.dom.setAttrib(e.dom.getParent(e.selection.getNode(),"PRE"),"data-language",n)}function t(n){e.dom.setAttrib(e.dom.getParent(e.selection.getNode(),"PRE"),"data-line",n)}function o(){var n=e.dom.getParent(e.selection.getNode(),"PRE"),o=e.dom.getAttrib(n,"data-language"),i=e.dom.getAttrib(n,"data-line")||0,l="-1"!=i;e.windowManager.open({title:wprainbow.l10n.code_properties,body:[{type:"listbox",name:"language",size:40,label:wprainbow.l10n.code_language,values:wprainbow.languages,value:o},{type:"checkbox",name:"enable_line_numbering",label:wprainbow.l10n.line_numbers,value:"1",checked:l},{type:"textbox",name:"starting_line",label:wprainbow.l10n.starting_line,value:i}],onsubmit:function(e){a(e.data.language),console.log();var n=-1;e.data.enable_line_numbering&&(n=Math.abs(e.data.starting_line),isNaN(n)&&(n=1)),t(n)}})}var i,l;e.addButton("wprainbow",{type:"listbox",text:wprainbow.l10n.code_language,tooltip:wprainbow.l10n.code_language,menu_button:!0,classes:"widget btn fixed-width",onselect:function(e){a(this.value())},values:wprainbow.languages,onPostRender:function(){i=this,e.on("nodechange",function(e){n()});for(var a in wprainbow.languages){var t=wprainbow.languages[a].value;t&&e.contentStyles.push('pre[data-language="'+t+'"]:before { content:"'+wprainbow.languages[a].text+'" }')}}}),e.addButton("wprainbow_codecontrol",{tooltip:wprainbow.l10n.code_properties,onclick:o,onPostRender:function(){l=this,e.on("nodechange",function(e){n()})}})});
//# sourceMappingURL=plugin.js.map

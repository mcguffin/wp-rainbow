!function(e){tinymce.PluginManager.add("wprainbow",function(n){function t(){var e=a();u.disabled(!e),u.value(n.dom.getAttrib(e,"data-language")),c&&c.disabled(!e)}function a(){return n.dom.getParent(n.selection.getNode(),"PRE")}function i(){var n,t,i=e(a());return i.children().first().is("code")||(t=i.attr("data-line"),i.html("<code>"+i.html()+"</code>"),n=i.children().first(),t?(i.removeAttr("data-line"),n.attr("data-line",t)):n.attr("data-line","-1")),i.children().get(0)}function o(t){var o=a(),l=i();""!==t||e(l).attr("data-line")||e(o).html(e(l).html()),n.dom.setAttrib(o,"data-language",t)}function l(e){n.dom.setAttrib(i(),"data-line",e)}function r(){function t(n,a){var i;return"function"==typeof n.name&&n.name()==a?n:("function"==typeof n.items&&e.each(n.items(),function(e,n){if(i=t(n,a))return!1}),i)}function r(){var t;return e.each(n.windowManager.getWindows(),function(e,n){if(n.settings.id===s)return t=n,!1}),t}var u=e(a()).attr("data-language"),c=e(i()).attr("data-line")||"1",g="-1"!=c,s="wp_rainbow_code_properties";n.windowManager.open({id:s,title:d.l10n.code_properties,body:[{type:"listbox",name:"language",size:40,label:d.l10n.code_language,values:d.languages,value:u},{type:"checkbox",name:"enable_line_numbering",label:d.l10n.line_numbers,value:"1",checked:g,onclick:function(n){var a=e(this.getEl()).is('[aria-checked="true"]'),i=t(r(),"language"),o=t(r(),"starting_line");a&&(-1===parseInt(o.value())&&o.value(1),""===i.value()&&i.value("generic"))}},{type:"textbox",name:"starting_line",label:d.l10n.starting_line,value:c}],onsubmit:function(e){o(e.data.language);var n=-1;e.data.enable_line_numbering&&(n=Math.abs(e.data.starting_line),isNaN(n)&&(n=1)),l(n)}})}var u,c,d=mce_wprainbow;n.addButton("wprainbow",{type:"listbox",text:d.l10n.code_language,tooltip:d.l10n.code_language,menu_button:!0,classes:"widget btn fixed-width",onselect:function(e){o(this.value())},values:d.languages,onPostRender:function(){u=this,n.on("nodechange",function(e){t()});for(var e in d.languages){var a=d.languages[e].value;a&&n.contentStyles.push('pre[data-language="'+a+'"]:before { content:"'+d.languages[e].text+'" }')}}}),n.addButton("wprainbow_codecontrol",{tooltip:d.l10n.code_properties,onclick:r,onPostRender:function(){c=this,n.on("nodechange",function(e){t()})}})})}(jQuery);
//# sourceMappingURL=plugin.js.map

!function(e){tinymce.PluginManager.add("wprainbow",function(n){function t(){var e=n.dom.getParent(n.selection.getNode(),"PRE");i.disabled(!e),i.value(n.dom.getAttrib(e,"data-language")),d&&d.disabled(!e)}function a(t){var a=n.dom.getParent(n.selection.getNode(),"PRE"),o=e(a);o.children().first().is("code")||o.html("<code>"+o.html()+"</code>"),n.dom.setAttrib(a,"data-language",t)}function o(e){n.dom.setAttrib(n.dom.getParent(n.selection.getNode(),"PRE"),"data-line",e)}function l(){var e=n.dom.getParent(n.selection.getNode(),"PRE"),t=n.dom.getAttrib(e,"data-language"),l=n.dom.getAttrib(e,"data-line")||0,i="-1"!=l;n.windowManager.open({title:g.l10n.code_properties,body:[{type:"listbox",name:"language",size:40,label:g.l10n.code_language,values:g.languages,value:t},{type:"checkbox",name:"enable_line_numbering",label:g.l10n.line_numbers,value:"1",checked:i},{type:"textbox",name:"starting_line",label:g.l10n.starting_line,value:l}],onsubmit:function(e){a(e.data.language),console.log();var n=-1;e.data.enable_line_numbering&&(n=Math.abs(e.data.starting_line),isNaN(n)&&(n=1)),o(n)}})}var i,d,g=mce_wprainbow;n.addButton("wprainbow",{type:"listbox",text:g.l10n.code_language,tooltip:g.l10n.code_language,menu_button:!0,classes:"widget btn fixed-width",onselect:function(e){a(this.value())},values:g.languages,onPostRender:function(){i=this,n.on("nodechange",function(e){t()});for(var e in g.languages){var a=g.languages[e].value;a&&n.contentStyles.push('pre[data-language="'+a+'"]:before { content:"'+g.languages[e].text+'" }')}}}),n.addButton("wprainbow_codecontrol",{tooltip:g.l10n.code_properties,onclick:l,onPostRender:function(){d=this,n.on("nodechange",function(e){t()})}})})}(jQuery);
//# sourceMappingURL=plugin.js.map

!function(e){tinymce.PluginManager.add("wprainbow",function(n){function t(){var e=a();d.disabled(!e),d.value(n.dom.getAttrib(e,"data-language")),u&&u.disabled(!e)}function a(){return n.dom.getParent(n.selection.getNode(),"PRE")}function l(){var n,t,l=e(a());return l.children().first().is("code")||(t=l.attr("data-line"),l.html("<code>"+l.html()+"</code>"),n=l.children().first(),t?(l.removeAttr("data-line"),n.attr("data-line",t)):n.attr("data-line","-1")),l.children().get(0)}function i(t){var i=a(),o=l();""!==t||e(o).attr("data-line")||e(i).html(e(o).html()),n.dom.setAttrib(i,"data-language",t)}function o(e){n.dom.setAttrib(l(),"data-line",e)}function r(){var t=e(a()).attr("data-language"),r=e(l()).attr("data-line")||"1",d="-1"!=r;n.windowManager.open({title:g.l10n.code_properties,body:[{type:"listbox",name:"language",size:40,label:g.l10n.code_language,values:g.languages,value:t},{type:"checkbox",name:"enable_line_numbering",label:g.l10n.line_numbers,value:"1",checked:d},{type:"textbox",name:"starting_line",label:g.l10n.starting_line,value:r}],onsubmit:function(e){i(e.data.language);var n=-1;e.data.enable_line_numbering&&(n=Math.abs(e.data.starting_line),isNaN(n)&&(n=1)),o(n)}})}var d,u,g=mce_wprainbow;n.addButton("wprainbow",{type:"listbox",text:g.l10n.code_language,tooltip:g.l10n.code_language,menu_button:!0,classes:"widget btn fixed-width",onselect:function(e){i(this.value())},values:g.languages,onPostRender:function(){d=this,n.on("nodechange",function(e){t()});for(var e in g.languages){var a=g.languages[e].value;a&&n.contentStyles.push('pre[data-language="'+a+'"]:before { content:"'+g.languages[e].text+'" }')}}}),n.addButton("wprainbow_codecontrol",{tooltip:g.l10n.code_properties,onclick:r,onPostRender:function(){u=this,n.on("nodechange",function(e){t()})}})})}(jQuery);
//# sourceMappingURL=plugin.js.map

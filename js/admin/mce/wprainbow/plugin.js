!function(n){tinymce.PluginManager.add("wprainbow",function(e){function t(){var n=a();u.disabled(!n),u.value(e.dom.getAttrib(n,"data-language")),r&&r.disabled(!n)}function a(){return e.dom.getParent(e.selection.getNode(),"PRE")}function i(t){var i=a();e.dom.setAttrib(i,"data-language",t),n(i).attr("data-line")||n(i).attr("data-line","-1")}function o(n){e.dom.setAttrib(a(),"data-line",n)}function l(){function t(e,a){var i;return"function"==typeof e.name&&e.name()==a?e:("function"==typeof e.items&&n.each(e.items(),function(n,e){if(i=t(e,a))return!1}),i)}function l(){var t;return n.each(e.windowManager.getWindows(),function(n,e){if(e.settings.id===s)return t=e,!1}),t}var u=a(),r=n(u).attr("data-language"),g=n(u).attr("data-line")||"1",d="-1"!=g,s="wp_rainbow_code_properties";e.windowManager.open({id:s,title:c.l10n.code_properties,body:[{type:"listbox",name:"language",size:40,label:c.l10n.code_language,values:c.languages,value:r},{type:"checkbox",name:"enable_line_numbering",label:c.l10n.line_numbers,value:"1",checked:d,onclick:function(e){var a=n(this.getEl()).is('[aria-checked="true"]'),i=t(l(),"language"),o=t(l(),"starting_line");a&&(-1===parseInt(o.value())&&o.value(1),""===i.value()&&i.value("generic"))}},{type:"textbox",name:"starting_line",label:c.l10n.starting_line,value:g}],onsubmit:function(n){i(n.data.language);var e=-1;n.data.enable_line_numbering&&(e=Math.abs(n.data.starting_line),isNaN(e)&&(e=1)),o(e)}})}var u,r,c=mce_wprainbow;e.addButton("wprainbow",{type:"listbox",text:c.l10n.code_language,tooltip:c.l10n.code_language,menu_button:!0,classes:"widget btn fixed-width",onselect:function(n){i(this.value())},values:c.languages,onPostRender:function(){u=this,e.on("nodechange",function(n){t()});for(var n in c.languages){var a=c.languages[n].value;a&&e.contentStyles.push('pre[data-language="'+a+'"]:before { content:"'+c.languages[n].text+'" }')}}}),e.addButton("wprainbow_codecontrol",{tooltip:c.l10n.code_properties,onclick:l,onPostRender:function(){r=this,e.on("nodechange",function(n){t()})}})})}(jQuery);
//# sourceMappingURL=plugin.js.map

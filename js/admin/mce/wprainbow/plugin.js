!function(n){tinymce.PluginManager.add("wprainbow",function(e){function t(){var n=a();r.disabled(!n),r.value(e.dom.getAttrib(n,"data-language")),u&&u.disabled(!n)}function a(){var t=e.selection.getNode();if(!n(t).is("pre")){if(n(t).is("#mcepastebin"))return s;t=e.dom.getParent(t,"PRE")}return s=t,t}function i(t){var i=a();e.dom.setAttrib(i,"data-language",t),n(i).attr("data-line")||n(i).attr("data-line","-1")}function o(n){e.dom.setAttrib(a(),"data-line",n)}function l(){function t(e,a){var i;return"function"==typeof e.name&&e.name()==a?e:("function"==typeof e.items&&n.each(e.items(),function(n,e){if(i=t(e,a))return!1}),i)}function l(){var t;return n.each(e.windowManager.getWindows(),function(n,e){if(e.settings.id===d)return t=e,!1}),t}var r=a(),u=n(r).attr("data-language"),s=n(r).attr("data-line")||"1",g="-1"!=s,d="wp_rainbow_code_properties";e.windowManager.open({id:d,title:c.l10n.code_properties,body:[{type:"listbox",name:"language",size:40,label:c.l10n.code_language,values:c.languages,value:u},{type:"checkbox",name:"enable_line_numbering",label:c.l10n.line_numbers,value:"1",checked:g,onclick:function(e){var a=n(this.getEl()).is('[aria-checked="true"]'),i=t(l(),"language"),o=t(l(),"starting_line");a&&(-1===parseInt(o.value())&&o.value(1),""===i.value()&&i.value("generic"))}},{type:"textbox",name:"starting_line",label:c.l10n.starting_line,value:s}],onsubmit:function(n){i(n.data.language);var e=-1;n.data.enable_line_numbering&&(e=Math.abs(n.data.starting_line),isNaN(e)&&(e=1)),o(e)}})}var r,u,c=mce_wprainbow,s=null;e.addButton("wprainbow",{type:"listbox",text:c.l10n.code_language,tooltip:c.l10n.code_language,menu_button:!0,classes:"widget btn fixed-width",onselect:function(n){i(this.value())},values:c.languages,onPostRender:function(){r=this,e.on("nodechange",function(n){t()});for(var n in c.languages){var a=c.languages[n].value;a&&e.contentStyles.push('pre[data-language="'+a+'"]:before { content:"'+c.languages[n].text+'" }')}}}),e.addButton("wprainbow_codecontrol",{tooltip:c.l10n.code_properties,onclick:l,onPostRender:function(){u=this,e.on("nodechange",function(n){t()})}});var g,d;e.on("PastePreProcess",function(n){a();g=n.content},!0),e.on("PastePreProcess",function(n){a();d=n.content,console.log(g==d),console.log(n)})})}(jQuery);
//# sourceMappingURL=plugin.js.map
